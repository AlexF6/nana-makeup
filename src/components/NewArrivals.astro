---
// src/components/NewArrivals.astro
import { Image } from "astro:assets";
import bread from "../assets/images/bread.webp";

const products = [
  {
    id: 1,
    name: "Ida Lace Up Tall Boot",
    price: "£490",
    image: bread,
    colors: [
      { hex: "#F2F0EA", selected: false },
      { hex: "#1a1a1a", selected: true },
    ],
  },
  {
    id: 2,
    name: "Jacqueline Pull On Boot",
    price: "£460",
    image: bread,
    colors: [
      { hex: "#C8102E", selected: true },
      { hex: "#000000", selected: false },
    ],
  },
  {
    id: 3,
    name: "Isolde Ballet Sneaker",
    price: "£270",
    image: bread,
    colors: [
      { hex: "#000000", selected: true },
      { hex: "#F2F0EA", selected: false },
      { hex: "#4B5563", selected: false },
    ],
  },
];
---

<section class="relative py-14 md:py-20">
  <!-- subtle texture (optional) -->
  <div
    class="pointer-events-none absolute inset-0 opacity-[0.22]"
    style="
      background-image: linear-gradient(to right, rgba(244,114,182,.08) 1px, transparent 1px),
                        linear-gradient(to bottom, rgba(244,114,182,.08) 1px, transparent 1px);
      background-size: 48px 48px;
      mask-image: radial-gradient(circle at 50% 20%, black 35%, transparent 78%);
    "
  ></div>

  <div class="relative mx-auto w-[min(1400px,calc(100%-3rem))]">
    <div class="mb-10 text-center md:mb-14">
      <h2 class="text-3xl font-extrabold tracking-tight text-zinc-900 md:text-4xl">
        New Arrivals
      </h2>

      <p class="mt-3 text-sm text-zinc-600">
        Lo nuevo, lo más limpio, lo más NANA.
      </p>

      <a
        href="/shop"
        class="mt-4 inline-flex items-center gap-2 rounded-full border border-black/10 bg-white/60 px-4 py-2 text-sm font-semibold text-zinc-800
               transition hover:bg-white hover:border-black/15 hover:text-zinc-900 focus:outline-none focus-visible:ring-2 focus-visible:ring-pink-500/30"
      >
        Shop all
        <span aria-hidden="true">→</span>
      </a>
    </div>

    <!-- Product Grid -->
    <div class="grid grid-cols-1 gap-x-6 gap-y-10 sm:grid-cols-2 md:grid-cols-3 lg:gap-x-8">
      {products.map((product, idx) => (
        <article
          class="animate-entry group flex flex-col rounded-3xl border border-black/10 bg-white/70 p-4 shadow-sm transition
                 hover:-translate-y-1 hover:bg-white/80 hover:shadow-xl hover:shadow-black/5"
          style={`--delay: ${120 + idx * 120}ms`}
        >
          <!-- Image Container -->
          <a
            href={`/product/${product.id}`}
            class="relative block overflow-hidden rounded-2xl border border-black/5 bg-white/60"
          >
            <div class="aspect-4/5 w-full transition duration-500 ease-out group-hover:scale-[1.03]">
              <Image
                src={product.image}
                alt={product.name}
                class="h-full w-full object-cover object-center p-7 mix-blend-multiply"
                width={600}
                loading="lazy"
                decoding="async"
              />
            </div>

            <!-- soft glow -->
            <div class="pointer-events-none absolute inset-0 opacity-0 transition duration-300 group-hover:opacity-100"
                 style="background: radial-gradient(600px circle at 30% 20%, rgba(236,72,153,.14), transparent 55%);"></div>
          </a>

          <!-- Product Details -->
          <div class="mt-5">
            <h3 class="text-center text-lg font-bold tracking-tight text-zinc-900">
              <a href={`/product/${product.id}`} class="transition hover:text-pink-700">
                {product.name}
              </a>
            </h3>

            <p class="mt-1 text-center text-sm font-semibold text-zinc-700">
              {product.price}
            </p>
          </div>

          <!-- Color Swatches -->
          <div class="mt-4 flex justify-center gap-2">
            {product.colors.map((color) => (
              <button
                type="button"
                aria-label="Select color"
                class:list={[
                  "h-3.5 w-3.5 rounded-full border border-black/15 transition",
                  color.selected
                    ? "ring-2 ring-zinc-900 ring-offset-2 ring-offset-[#FFFAFA]"
                    : "hover:scale-110 hover:border-black/25",
                ]}
                style={`background-color: ${color.hex};`}
              />
            ))}
          </div>
        </article>
      ))}
    </div>
  </div>
</section>

<style>
  .animate-entry {
    opacity: 0;
    animation: fadeInUp 0.7s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
    animation-delay: var(--delay, 0ms);
  }

  @keyframes fadeInUp {
    from { opacity: 0; transform: translateY(22px); }
    to   { opacity: 1; transform: translateY(0); }
  }

  @media (prefers-reduced-motion: reduce) {
    .animate-entry { opacity: 1; animation: none; transform: none; }
  }
</style>
