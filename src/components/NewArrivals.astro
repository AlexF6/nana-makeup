---
// src/components/NewArrivals.astro
import { Image } from "astro:assets";
// Using your existing image as a placeholder. 
// Ideally, you would have transparent PNGs of shoes/products here.
import bread from "../assets/images/bread.webp";

const products = [
  {
    id: 1,
    name: "Ida Lace Up Tall Boot",
    price: "£490",
    image: bread,
    colors: [
      { hex: "#F2F0EA", selected: false }, 
      { hex: "#1a1a1a", selected: true }
    ], 
  },
  {
    id: 2,
    name: "Jacqueline Pull On Boot",
    price: "£460",
    image: bread,
    colors: [
      { hex: "#C8102E", selected: true },
      { hex: "#000000", selected: false }
    ],
  },
  {
    id: 3,
    name: "Isolde Ballet Sneaker",
    price: "£270",
    image: bread,
    colors: [
      { hex: "#000000", selected: true },
      { hex: "#F2F0EA", selected: false },
      { hex: "#4B5563", selected: false }
    ],
  },
];
---

<section class="bg-white py-16 md:py-24 text-black">
  <div class="mx-auto w-[min(1400px,calc(100%-3rem))]">
    
    <div class="mb-12 text-center md:mb-16">
      <h2 class="font-serif text-3xl text-gray-900 md:text-4xl tracking-tight">
        NEW ARRIVALS
      </h2>
      <a 
        href="/shop" 
        class="mt-4 inline-block border-b border-transparent text-sm text-gray-600 transition-colors hover:border-gray-400 hover:text-black"
      >
        Shop all
      </a>
    </div>

    <!-- Product Grid -->
    <div class="grid grid-cols-1 gap-x-6 gap-y-12 sm:grid-cols-2 md:grid-cols-3 lg:gap-x-8">
      {products.map((product) => (
        <div class="group flex flex-col items-center">
          
          <!-- Image Container (Beige Background) -->
          <a href={`/product/${product.id}`} class="relative mb-6 block w-full overflow-hidden bg-[#F2F0EA]">
            <!-- 
              aspect-[4/5] matches the vertical portrait style of the boots.
              mix-blend-multiply helps if your images have white backgrounds instead of transparent.
            -->
            <div class="aspect-4/5 w-full transition duration-500 ease-in-out group-hover:scale-105">
              <Image
                src={product.image}
                alt={product.name}
                class="h-full w-full object-cover object-center p-8 mix-blend-multiply" 
                width={600}
              />
            </div>
            
            <!-- Optional: Quick Add overlay could go here -->
          </a>

          <!-- Product Details -->
          <h3 class="font-serif text-lg text-gray-900 uppercase tracking-wide text-center">
            <a href={`/product/${product.id}`}>
              {product.name}
            </a>
          </h3>
          
          <p class="mt-1 text-sm text-gray-500 font-medium">
            {product.price}
          </p>

          <!-- Color Swatches -->
          <div class="mt-3 flex gap-2">
            {product.colors.map((color) => (
              <button
                type="button"
                aria-label="Select color"
                class:list={[
                  "h-3 w-3 rounded-full border border-gray-300 transition-all",
                  color.selected 
                    ? "ring-1 ring-gray-900 ring-offset-2" 
                    : "hover:scale-110"
                ]}
                style={`background-color: ${color.hex};`}
              />
            ))}
          </div>
        </div>
      ))}
    </div>

  </div>
</section>